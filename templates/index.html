<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Crops Hunter - الرئيسية</title>
    <style>
        body { font-family: Arial; direction: rtl; margin: 40px; background-color: #f8f9fa; }
        .product { 
            border: 1px solid #ccc; 
            padding: 15px; 
            margin-bottom: 15px; 
            border-radius: 8px; 
            background-color: white;
        }
        .category-title { 
            margin-top: 40px; 
            font-size: 24px; 
            color: #333; 
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
        }
        .whatsapp-btn {
            background-color: #25D366;
            color: white;
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            text-decoration: none;
            display: inline-block;
            margin-top: 10px;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        .header a {
            margin-left: 10px;
            text-decoration: none;
            font-weight: bold;
            color: #007bff;
        }
        .info {
            margin: 5px 0;
        }
    </style>
</head>
<body>

<div class="header">
    <h1>Crops Hunter</h1>
    <div>
        <a href="{{ url_for('index') }}">الرئيسية</a>
        <a href="{{ url_for('contact') }}">تواصل معنا</a>
        <a href="{{ url_for('about') }}">من نحن</a>
        {% if session.get('logged_in') %}
            <a href="{{ url_for('add_product') }}">إضافة منتج</a>
            <a href="{{ url_for('logout') }}">تسجيل الخروج</a>
        {% else %}
            <a href="{{ url_for('login') }}">تسجيل الدخول</a>
        {% endif %}
    </div>
</div>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div style="padding: 10px; background-color: {% if category == 'success' %}#d4edda{% elif category == 'error' %}#f8d7da{% else %}#cce5ff{% endif %}; margin-bottom: 10px; border-radius: 5px;">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}

{% for category, products in products_by_category.items() %}
  <div class="category-title">{{ category }}</div>
  {% for product in products %}
    <div class="product">
        <div class="info"><strong>{{ product.name }}</strong></div>
        <div class="info">السعر: {{ "{:,.0f}".format(product.price | int) }} جنيه سوداني</div>
        <div class="info">الوحدة: {{ product.unit }}</div>
        {% if product.quantity %}
            <div class="info">الكمية: {{ product.quantity }}</div>
        {% endif %}
        {% if product.origin %}
            <div class="info">مكان الإنتاج: {{ product.origin }}</div>
        {% endif %}
        {% if product.production_date %}
            <div class="info">تاريخ الإنتاج: {{ product.production_date }}</div>
        {% endif %}
        <a class="whatsapp-btn" href="https://wa.me/249916399000?text=مرحبًا، أرغب في طلب {{ product.name }}.\nالكمية: {{ product.quantity }}\nمكان الاستلام: ....\nالاسم: ...." target="_blank">اطلب عبر واتساب</a>
    </div>
  {% endfor %}
{% endfor %}

</body>
</html>
